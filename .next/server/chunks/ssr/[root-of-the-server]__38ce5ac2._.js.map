{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 37, "column": 0}, "map": {"version":3,"sources":["file://D%3A/A.minorproject/jsm_mock_interview_platform/mock_interview_platform/firebase/admin.ts"],"sourcesContent":["// lib/firebase/admin.ts\r\nimport { initializeApp, getApps, cert } from \"firebase-admin/app\";\r\nimport { getAuth } from \"firebase-admin/auth\";\r\nimport { getFirestore } from \"firebase-admin/firestore\";\r\n\r\n// Initialize Firebase Admin SDK\r\nfunction initFirebaseAdmin() {\r\n  const apps = getApps();\r\n\r\n  if (!apps.length) {\r\n    initializeApp({\r\n      credential: cert({\r\n        \r\n      projectId: process.env.FIREBASE_PROJECT_ID,\r\n      clientEmail: process.env.FIREBASE_CLIENT_EMAIL,\r\n      privateKey: process.env.FIREBASE_PRIVATE_KEY?.replace(/\\\\n/g, '\\n')\r\n      }),\r\n    });\r\n  }\r\n\r\n  return {\r\n    auth: getAuth(),\r\n    db: getFirestore(),\r\n  };\r\n}\r\n\r\nexport const { auth, db } = initFirebaseAdmin();\r\n\r\n\r\n"],"names":[],"mappings":"AAAA,wBAAwB;;;;;AACxB;AACA;AACA;;;;;;;;;;AAEA,gCAAgC;AAChC,SAAS;IACP,MAAM,OAAO,CAAA,GAAA,gJAAA,CAAA,UAAO,AAAD;IAEnB,IAAI,CAAC,KAAK,MAAM,EAAE;QAChB,CAAA,GAAA,gJAAA,CAAA,gBAAa,AAAD,EAAE;YACZ,YAAY,CAAA,GAAA,gJAAA,CAAA,OAAI,AAAD,EAAE;gBAEjB,WAAW,QAAQ,GAAG,CAAC,mBAAmB;gBAC1C,aAAa,QAAQ,GAAG,CAAC,qBAAqB;gBAC9C,YAAY,QAAQ,GAAG,CAAC,oBAAoB,EAAE,QAAQ,QAAQ;YAC9D;QACF;IACF;IAEA,OAAO;QACL,MAAM,CAAA,GAAA,kJAAA,CAAA,UAAO,AAAD;QACZ,IAAI,CAAA,GAAA,4JAAA,CAAA,eAAY,AAAD;IACjB;AACF;AAEO,MAAM,EAAE,IAAI,EAAE,EAAE,EAAE,GAAG","debugId":null}},
    {"offset": {"line": 79, "column": 0}, "map": {"version":3,"sources":["file://D%3A/A.minorproject/jsm_mock_interview_platform/mock_interview_platform/lib/actions/auth.action.ts"],"sourcesContent":["\"use server\";\r\n\r\nimport { db, auth } from \"@/firebase/admin\"; // Adjusted the path to match the correct location\r\nimport { cookies } from \"next/headers\";\r\n\r\nconst ONE_WEEK = 60 * 60 * 24 * 7; // One week in milliseconds\r\n\r\nexport async function signUp(params: SignUpParams){\r\n    const {uid, name, email} = params;\r\n\r\n    try{\r\n         const userRecord = await db.collection('users').doc(uid).get()\r\n   \r\n         if (userRecord.exists) {\r\n             \r\n            return {\r\n                success: false,\r\n                message: 'User alreasdy exists.Please sign in instead.'\r\n            }\r\n         }\r\n\r\n         await db.collection('users').doc(uid).set({\r\n\r\n            name,\r\n            email\r\n         })\r\n          \r\n         return {\r\n            success: true,\r\n            message: \"Account created successfully. Please sign in.\"\r\n\r\n         }\r\n\r\n   \r\n        }  catch (e:any) {\r\n        \r\n        console.error(\"Error creating a user\", e);\r\n\r\n        if(e.code === 'auth/email-already-in-use'){\r\n\r\n            return{\r\n                success: false,\r\n                message: \"Email already in use.\"\r\n            }\r\n        }\r\n\r\n        return{\r\n            success: false,\r\n            message: \"Lodhe dusri id daal na \",\r\n        }\r\n        \r\n    }\r\n}\r\n\r\nexport async function signIn(params: SignInParams){\r\n    const {email, idToken} = params;\r\n\r\n    try{\r\n           \r\n        const userRecord = await auth.getUserByEmail(email);\r\n        \r\n        if (!userRecord) {\r\n            return {\r\n                success: false,\r\n                message: \"User does not exist. Please sign up.\"\r\n            };\r\n        }\r\n\r\n        await setSessionCookie(idToken);\r\n\r\n    } catch(e){\r\n        console.error(\"Sign in failed:\", e);\r\n\r\n    }\r\n\r\n    return{\r\n        success: false,\r\n        message: \"Failed to log in an account.\"\r\n    }\r\n}\r\n\r\nexport async function setSessionCookie(idToken: string){\r\n    const cookieStore = await cookies();\r\n    const sessionCookie = await auth.createSessionCookie(idToken, { expiresIn: ONE_WEEK * 1000, })\r\n    \r\n    cookieStore.set('session', sessionCookie, {\r\n        maxAge: ONE_WEEK ,\r\n        httpOnly: true,\r\n        secure: process.env.NODE_ENV === 'production',\r\n        path: '/',\r\n        sameSite: 'lax',\r\n    })\r\n\r\n} \r\n\r\nexport async function getCurrentUser(): Promise<User | null> {\r\n    const cookieStore = await cookies();\r\n  \r\n    const sessionCookie = cookieStore.get(\"session\")?.value;\r\n    if (!sessionCookie) return null;\r\n  \r\n    try {\r\n      const decodedClaims = await auth.verifySessionCookie(sessionCookie, true);\r\n  \r\n      // get user info from db\r\n      const userRecord = await db\r\n        .collection(\"users\")\r\n        .doc(decodedClaims.uid)\r\n        .get();\r\n      if (!userRecord.exists) return null;\r\n  \r\n      return {\r\n        ...userRecord.data(),\r\n        id: userRecord.id,\r\n      } as User;\r\n    } catch (error) {\r\n      console.log(error);\r\n  \r\n      // Invalid or expired session\r\n      return null;\r\n    }\r\n  }\r\n  \r\n  // Check if user is authenticated\r\nexport async function isAuthenticated() {\r\n    const user = await getCurrentUser();\r\n    return !!user; \r\n  }"],"names":[],"mappings":";;;;;;;;;AAEA,uMAA6C,kDAAkD;AAC/F;;;;;;;;;;AAEA,MAAM,WAAW,KAAK,KAAK,KAAK,GAAG,2BAA2B;AAEvD,eAAe,OAAO,MAAoB;IAC7C,MAAM,EAAC,GAAG,EAAE,IAAI,EAAE,KAAK,EAAC,GAAG;IAE3B,IAAG;QACE,MAAM,aAAa,MAAM,iHAAA,CAAA,KAAE,CAAC,UAAU,CAAC,SAAS,GAAG,CAAC,KAAK,GAAG;QAE5D,IAAI,WAAW,MAAM,EAAE;YAEpB,OAAO;gBACH,SAAS;gBACT,SAAS;YACb;QACH;QAEA,MAAM,iHAAA,CAAA,KAAE,CAAC,UAAU,CAAC,SAAS,GAAG,CAAC,KAAK,GAAG,CAAC;YAEvC;YACA;QACH;QAEA,OAAO;YACJ,SAAS;YACT,SAAS;QAEZ;IAGD,EAAG,OAAO,GAAO;QAEjB,QAAQ,KAAK,CAAC,yBAAyB;QAEvC,IAAG,EAAE,IAAI,KAAK,6BAA4B;YAEtC,OAAM;gBACF,SAAS;gBACT,SAAS;YACb;QACJ;QAEA,OAAM;YACF,SAAS;YACT,SAAS;QACb;IAEJ;AACJ;AAEO,eAAe,OAAO,MAAoB;IAC7C,MAAM,EAAC,KAAK,EAAE,OAAO,EAAC,GAAG;IAEzB,IAAG;QAEC,MAAM,aAAa,MAAM,iHAAA,CAAA,OAAI,CAAC,cAAc,CAAC;QAE7C,IAAI,CAAC,YAAY;YACb,OAAO;gBACH,SAAS;gBACT,SAAS;YACb;QACJ;QAEA,MAAM,iBAAiB;IAE3B,EAAE,OAAM,GAAE;QACN,QAAQ,KAAK,CAAC,mBAAmB;IAErC;IAEA,OAAM;QACF,SAAS;QACT,SAAS;IACb;AACJ;AAEO,eAAe,iBAAiB,OAAe;IAClD,MAAM,cAAc,MAAM,CAAA,GAAA,+HAAA,CAAA,UAAO,AAAD;IAChC,MAAM,gBAAgB,MAAM,iHAAA,CAAA,OAAI,CAAC,mBAAmB,CAAC,SAAS;QAAE,WAAW,WAAW;IAAM;IAE5F,YAAY,GAAG,CAAC,WAAW,eAAe;QACtC,QAAQ;QACR,UAAU;QACV,QAAQ,oDAAyB;QACjC,MAAM;QACN,UAAU;IACd;AAEJ;AAEO,eAAe;IAClB,MAAM,cAAc,MAAM,CAAA,GAAA,+HAAA,CAAA,UAAO,AAAD;IAEhC,MAAM,gBAAgB,YAAY,GAAG,CAAC,YAAY;IAClD,IAAI,CAAC,eAAe,OAAO;IAE3B,IAAI;QACF,MAAM,gBAAgB,MAAM,iHAAA,CAAA,OAAI,CAAC,mBAAmB,CAAC,eAAe;QAEpE,wBAAwB;QACxB,MAAM,aAAa,MAAM,iHAAA,CAAA,KAAE,CACxB,UAAU,CAAC,SACX,GAAG,CAAC,cAAc,GAAG,EACrB,GAAG;QACN,IAAI,CAAC,WAAW,MAAM,EAAE,OAAO;QAE/B,OAAO;YACL,GAAG,WAAW,IAAI,EAAE;YACpB,IAAI,WAAW,EAAE;QACnB;IACF,EAAE,OAAO,OAAO;QACd,QAAQ,GAAG,CAAC;QAEZ,6BAA6B;QAC7B,OAAO;IACT;AACF;AAGK,eAAe;IAClB,MAAM,OAAO,MAAM;IACnB,OAAO,CAAC,CAAC;AACX;;;IAxHoB;IA+CA;IA2BA;IAcA;IA6BA;;AArHA,+OAAA;AA+CA,+OAAA;AA2BA,+OAAA;AAcA,+OAAA;AA6BA,+OAAA","debugId":null}},
    {"offset": {"line": 207, "column": 0}, "map": {"version":3,"sources":["file://D%3A/A.minorproject/jsm_mock_interview_platform/mock_interview_platform/.next-internal/server/app/%28auth%29/sign-up/page/actions.js%20%28server%20actions%20loader%29"],"sourcesContent":["export {signIn as '40e3352e6b45d1a74be815a12b29d69536c585faf9'} from 'ACTIONS_MODULE0'\nexport {signUp as '40836d58e84760212e4e6e7adccbc9afca64ff385d'} from 'ACTIONS_MODULE0'\n"],"names":[],"mappings":";AAAA","debugId":null}},
    {"offset": {"line": 291, "column": 0}, "map": {"version":3,"sources":["file://D%3A/A.minorproject/jsm_mock_interview_platform/mock_interview_platform/app/components/AuthForm.tsx/proxy.mjs"],"sourcesContent":["import { registerClientReference } from \"react-server-dom-turbopack/server.edge\";\nexport default registerClientReference(\n    function() { throw new Error(\"Attempted to call the default export of [project]/app/components/AuthForm.tsx <module evaluation> from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/app/components/AuthForm.tsx <module evaluation>\",\n    \"default\",\n);\n"],"names":[],"mappings":";;;AAAA;;uCACe,CAAA,GAAA,qPAAA,CAAA,0BAAuB,AAAD,EACjC;IAAa,MAAM,IAAI,MAAM;AAA+R,GAC5T,6DACA","debugId":null}},
    {"offset": {"line": 305, "column": 0}, "map": {"version":3,"sources":["file://D%3A/A.minorproject/jsm_mock_interview_platform/mock_interview_platform/app/components/AuthForm.tsx/proxy.mjs"],"sourcesContent":["import { registerClientReference } from \"react-server-dom-turbopack/server.edge\";\nexport default registerClientReference(\n    function() { throw new Error(\"Attempted to call the default export of [project]/app/components/AuthForm.tsx from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/app/components/AuthForm.tsx\",\n    \"default\",\n);\n"],"names":[],"mappings":";;;AAAA;;uCACe,CAAA,GAAA,qPAAA,CAAA,0BAAuB,AAAD,EACjC;IAAa,MAAM,IAAI,MAAM;AAA2Q,GACxS,yCACA","debugId":null}},
    {"offset": {"line": 319, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"","debugId":null}},
    {"offset": {"line": 329, "column": 0}, "map": {"version":3,"sources":["file://D%3A/A.minorproject/jsm_mock_interview_platform/mock_interview_platform/app/%28auth%29/sign-up/page.tsx"],"sourcesContent":["import AuthForm from '@/app/components/AuthForm';\r\nimport React from 'react';\r\n\r\nconst Page = ()=> {\r\n    return <AuthForm type=\"sign-up\" />\r\n}\r\nexport default Page;"],"names":[],"mappings":";;;;AAAA;;;AAGA,MAAM,OAAO;IACT,qBAAO,8OAAC,8HAAA,CAAA,UAAQ;QAAC,MAAK;;;;;;AAC1B;uCACe","debugId":null}}]
}