{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 37, "column": 0}, "map": {"version":3,"sources":["file://D%3A/A.minorproject/jsm_mock_interview_platform/mock_interview_platform/firebase/admin.ts"],"sourcesContent":["// lib/firebase/admin.ts\r\nimport { initializeApp, getApps, cert } from \"firebase-admin/app\";\r\nimport { getAuth } from \"firebase-admin/auth\";\r\nimport { getFirestore } from \"firebase-admin/firestore\";\r\n\r\n// Initialize Firebase Admin SDK\r\nfunction initFirebaseAdmin() {\r\n  const apps = getApps();\r\n\r\n  if (!apps.length) {\r\n    initializeApp({\r\n      credential: cert({\r\n        \r\n      projectId: process.env.FIREBASE_PROJECT_ID,\r\n      clientEmail: process.env.FIREBASE_CLIENT_EMAIL,\r\n      privateKey: process.env.FIREBASE_PRIVATE_KEY?.replace(/\\\\n/g, '\\n')\r\n      }),\r\n    });\r\n  }\r\n\r\n  return {\r\n    auth: getAuth(),\r\n    db: getFirestore(),\r\n  };\r\n}\r\n\r\nexport const { auth, db } = initFirebaseAdmin();\r\n\r\n\r\n"],"names":[],"mappings":"AAAA,wBAAwB;;;;;AACxB;AACA;AACA;;;;;;;;;;AAEA,gCAAgC;AAChC,SAAS;IACP,MAAM,OAAO,CAAA,GAAA,gJAAA,CAAA,UAAO,AAAD;IAEnB,IAAI,CAAC,KAAK,MAAM,EAAE;QAChB,CAAA,GAAA,gJAAA,CAAA,gBAAa,AAAD,EAAE;YACZ,YAAY,CAAA,GAAA,gJAAA,CAAA,OAAI,AAAD,EAAE;gBAEjB,WAAW,QAAQ,GAAG,CAAC,mBAAmB;gBAC1C,aAAa,QAAQ,GAAG,CAAC,qBAAqB;gBAC9C,YAAY,QAAQ,GAAG,CAAC,oBAAoB,EAAE,QAAQ,QAAQ;YAC9D;QACF;IACF;IAEA,OAAO;QACL,MAAM,CAAA,GAAA,kJAAA,CAAA,UAAO,AAAD;QACZ,IAAI,CAAA,GAAA,4JAAA,CAAA,eAAY,AAAD;IACjB;AACF;AAEO,MAAM,EAAE,IAAI,EAAE,EAAE,EAAE,GAAG","debugId":null}},
    {"offset": {"line": 183, "column": 0}, "map": {"version":3,"sources":["file://D%3A/A.minorproject/jsm_mock_interview_platform/mock_interview_platform/lib/actions/auth.action.ts"],"sourcesContent":["\"use server\";\r\n\r\nimport { db, auth } from \"@/firebase/admin\"; // Adjusted the path to match the correct location\r\nimport { cookies } from \"next/headers\";\r\nimport { initializeApp } from 'firebase/app';\r\nimport { getFirestore } from 'firebase/firestore';\r\n\r\nconst firebaseConfig = {\r\n  // Your config here\r\n};\r\n\r\nconst app = initializeApp(firebaseConfig);\r\nconst db = getFirestore(app);\r\n\r\nconst ONE_WEEK = 60 * 60 * 24 * 7; // One week in milliseconds\r\n\r\nexport async function signUp(params: SignUpParams){\r\n    const {uid, name, email} = params;\r\n\r\n    try{\r\n         const userRecord = await db.collection('users').doc(uid).get()\r\n   \r\n         if (userRecord.exists) {\r\n             \r\n            return {\r\n                success: false,\r\n                message: 'User alreasdy exists.Please sign in instead.'\r\n            }\r\n         }\r\n\r\n         await db.collection('users').doc(uid).set({\r\n\r\n            name,\r\n            email\r\n         })\r\n          \r\n         return {\r\n            success: true,\r\n            message: \"Account created successfully. Please sign in.\"\r\n\r\n         }\r\n\r\n   \r\n        }  catch (e:any) {\r\n        \r\n        console.error(\"Error creating a user\", e);\r\n\r\n        if(e.code === 'auth/email-already-in-use'){\r\n\r\n            return{\r\n                success: false,\r\n                message: \"Email already in use.\"\r\n            }\r\n        }\r\n\r\n        return{\r\n            success: false,\r\n            message: \"Lodhe dusri id daal na \",\r\n        }\r\n        \r\n    }\r\n}\r\n\r\nexport async function signIn(params: SignInParams){\r\n    const {email, idToken} = params;\r\n\r\n    try{\r\n           \r\n        const userRecord = await auth.getUserByEmail(email);\r\n        \r\n        if (!userRecord) {\r\n            return {\r\n                success: false,\r\n                message: \"User does not exist. Please sign up.\"\r\n            };\r\n        }\r\n\r\n        await setSessionCookie(idToken);\r\n\r\n    } catch(e){\r\n        console.error(\"Sign in failed:\", e);\r\n\r\n    }\r\n\r\n    return{\r\n        success: false,\r\n        message: \"Failed to log in an account.\"\r\n    }\r\n}\r\n\r\nexport async function setSessionCookie(idToken: string){\r\n    const cookieStore = await cookies();\r\n    const sessionCookie = await auth.createSessionCookie(idToken, { expiresIn: ONE_WEEK * 1000, })\r\n    \r\n    cookieStore.set('session', sessionCookie, {\r\n        maxAge: ONE_WEEK ,\r\n        httpOnly: true,\r\n        secure: process.env.NODE_ENV === 'production',\r\n        path: '/',\r\n        sameSite: 'lax',\r\n    })\r\n\r\n} \r\n\r\nexport async function getCurrentUser(): Promise<User | null> {\r\n    const cookieStore = await cookies();\r\n  \r\n    const sessionCookie = cookieStore.get(\"session\")?.value;\r\n    if (!sessionCookie) return null;\r\n  \r\n    try {\r\n      const decodedClaims = await auth.verifySessionCookie(sessionCookie, true);\r\n  \r\n      // get user info from db\r\n      const userRecord = await db\r\n        .collection(\"users\")\r\n        .doc(decodedClaims.uid)\r\n        .get();\r\n      if (!userRecord.exists) return null;\r\n  \r\n      return {\r\n        ...userRecord.data(),\r\n        id: userRecord.id,\r\n      } as User;\r\n    } catch (error) {\r\n      console.log(error);\r\n  \r\n      // Invalid or expired session\r\n      return null;\r\n    }\r\n  }\r\n  \r\n  // Check if user is authenticated\r\nexport async function isAuthenticated() {\r\n    const user = await getCurrentUser();\r\n    return !!user; \r\n  }"],"names":[],"mappings":";;;;;;;;;AAEA,uMAA6C,kDAAkD;AAC/F;AACA;AAAA;AACA;AAAA;;;;;;;;;;;;AAEA,MAAM,iBAAiB;AAEvB;AAEA,MAAM,MAAM,CAAA,GAAA,oLAAA,CAAA,gBAAa,AAAD,EAAE;AAC1B,MAAM,KAAK,CAAA,GAAA,iKAAA,CAAA,eAAY,AAAD,EAAE;AAExB,MAAM,WAAW,KAAK,KAAK,KAAK,GAAG,2BAA2B;AAEvD,eAAe,OAAO,MAAoB;IAC7C,MAAM,EAAC,GAAG,EAAE,IAAI,EAAE,KAAK,EAAC,GAAG;IAE3B,IAAG;QACE,MAAM,aAAa,MAAM,GAAG,UAAU,CAAC,SAAS,GAAG,CAAC,KAAK,GAAG;QAE5D,IAAI,WAAW,MAAM,EAAE;YAEpB,OAAO;gBACH,SAAS;gBACT,SAAS;YACb;QACH;QAEA,MAAM,GAAG,UAAU,CAAC,SAAS,GAAG,CAAC,KAAK,GAAG,CAAC;YAEvC;YACA;QACH;QAEA,OAAO;YACJ,SAAS;YACT,SAAS;QAEZ;IAGD,EAAG,OAAO,GAAO;QAEjB,QAAQ,KAAK,CAAC,yBAAyB;QAEvC,IAAG,EAAE,IAAI,KAAK,6BAA4B;YAEtC,OAAM;gBACF,SAAS;gBACT,SAAS;YACb;QACJ;QAEA,OAAM;YACF,SAAS;YACT,SAAS;QACb;IAEJ;AACJ;AAEO,eAAe,OAAO,MAAoB;IAC7C,MAAM,EAAC,KAAK,EAAE,OAAO,EAAC,GAAG;IAEzB,IAAG;QAEC,MAAM,aAAa,MAAM,iHAAA,CAAA,OAAI,CAAC,cAAc,CAAC;QAE7C,IAAI,CAAC,YAAY;YACb,OAAO;gBACH,SAAS;gBACT,SAAS;YACb;QACJ;QAEA,MAAM,iBAAiB;IAE3B,EAAE,OAAM,GAAE;QACN,QAAQ,KAAK,CAAC,mBAAmB;IAErC;IAEA,OAAM;QACF,SAAS;QACT,SAAS;IACb;AACJ;AAEO,eAAe,iBAAiB,OAAe;IAClD,MAAM,cAAc,MAAM,CAAA,GAAA,+HAAA,CAAA,UAAO,AAAD;IAChC,MAAM,gBAAgB,MAAM,iHAAA,CAAA,OAAI,CAAC,mBAAmB,CAAC,SAAS;QAAE,WAAW,WAAW;IAAM;IAE5F,YAAY,GAAG,CAAC,WAAW,eAAe;QACtC,QAAQ;QACR,UAAU;QACV,QAAQ,oDAAyB;QACjC,MAAM;QACN,UAAU;IACd;AAEJ;AAEO,eAAe;IAClB,MAAM,cAAc,MAAM,CAAA,GAAA,+HAAA,CAAA,UAAO,AAAD;IAEhC,MAAM,gBAAgB,YAAY,GAAG,CAAC,YAAY;IAClD,IAAI,CAAC,eAAe,OAAO;IAE3B,IAAI;QACF,MAAM,gBAAgB,MAAM,iHAAA,CAAA,OAAI,CAAC,mBAAmB,CAAC,eAAe;QAEpE,wBAAwB;QACxB,MAAM,aAAa,MAAM,GACtB,UAAU,CAAC,SACX,GAAG,CAAC,cAAc,GAAG,EACrB,GAAG;QACN,IAAI,CAAC,WAAW,MAAM,EAAE,OAAO;QAE/B,OAAO;YACL,GAAG,WAAW,IAAI,EAAE;YACpB,IAAI,WAAW,EAAE;QACnB;IACF,EAAE,OAAO,OAAO;QACd,QAAQ,GAAG,CAAC;QAEZ,6BAA6B;QAC7B,OAAO;IACT;AACF;AAGK,eAAe;IAClB,MAAM,OAAO,MAAM;IACnB,OAAO,CAAC,CAAC;AACX;;;IAxHoB;IA+CA;IA2BA;IAcA;IA6BA;;AArHA,+OAAA;AA+CA,+OAAA;AA2BA,+OAAA;AAcA,+OAAA;AA6BA,+OAAA","debugId":null}},
    {"offset": {"line": 321, "column": 0}, "map": {"version":3,"sources":["file://D%3A/A.minorproject/jsm_mock_interview_platform/mock_interview_platform/app/%28root%29/layout.tsx"],"sourcesContent":["\r\nimport Link from 'next/link';\r\nimport { ReactNode} from 'react'\r\nimport React from 'react';\r\nimport Image from 'next/image';\r\nimport { redirect } from \"next/navigation\";\r\n\r\nimport { isAuthenticated } from \"@/lib/actions/auth.action\";\r\n\r\nconst RootLayout = async ({ children }: { children: ReactNode }) => {\r\n    \r\n  const isUserAuthenticated = await isAuthenticated();\r\n  if (!isUserAuthenticated) redirect(\"/sign-in\");\r\n\r\n    return (\r\n        <div className='root-layout'>\r\n\r\n            <nav>\r\n                <Link href=\"\" className='flex items-center gap-2'>\r\n                <Image\r\n                     src=\"/logo.svg\"\r\n                     alt=\"logo\"\r\n                      width={38}\r\n                     height={32}\r\n                      priority={false} // or true if it's above the fold\r\n/>\r\n                <h2 className=\"text-primary-100 \">PrepWise</h2>\r\n\r\n                </Link>\r\n\r\n            </nav>\r\n            {children}\r\n\r\n        </div>\r\n    )\r\n}\r\nexport default RootLayout;"],"names":[],"mappings":";;;;AACA;AAGA;AACA;AAAA;AAEA;;;;;;;;;;AAEA,MAAM,aAAa,OAAO,EAAE,QAAQ,EAA2B;IAE7D,MAAM,sBAAsB,MAAM,CAAA,GAAA,gIAAA,CAAA,kBAAe,AAAD;IAChD,IAAI,CAAC,qBAAqB,CAAA,GAAA,qLAAA,CAAA,WAAQ,AAAD,EAAE;IAEjC,qBACI,8OAAC;QAAI,WAAU;;0BAEX,8OAAC;0BACG,cAAA,8OAAC,4JAAA,CAAA,UAAI;oBAAC,MAAK;oBAAG,WAAU;;sCACxB,8OAAC,6HAAA,CAAA,UAAK;4BACD,KAAI;4BACJ,KAAI;4BACH,OAAO;4BACR,QAAQ;4BACP,UAAU;;;;;;sCAEhB,8OAAC;4BAAG,WAAU;sCAAoB;;;;;;;;;;;;;;;;;YAKrC;;;;;;;AAIb;uCACe","debugId":null}}]
}